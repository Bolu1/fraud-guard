fraud-guard/
‚îÇ
‚îú‚îÄ‚îÄ models/                                 # Pre-trained models (shipped with package)
‚îÇ   ‚îî‚îÄ‚îÄ baseline/
‚îÇ       ‚îú‚îÄ‚îÄ model.json                     # TensorFlow.js model architecture (6 KB)
‚îÇ       ‚îú‚îÄ‚îÄ group1-shard1of1.bin           # Model weights (75 KB)
‚îÇ       ‚îú‚îÄ‚îÄ fraud_detection_model.h5       # Keras model for retraining (287 KB)
‚îÇ       ‚îú‚îÄ‚îÄ scaler_params.json             # Feature normalization parameters (1.3 KB)
‚îÇ       ‚îî‚îÄ‚îÄ model_config.json              # Model metadata (596 bytes)
‚îÇ
‚îú‚îÄ‚îÄ training/                               # Python retraining scripts
‚îÇ   ‚îú‚îÄ‚îÄ incremental_retrain.py             # Fine-tune model on user feedback
‚îÇ   ‚îú‚îÄ‚îÄ convert_model.py                   # Convert Keras ‚Üí TensorFlow.js
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt                   # Python dependencies
‚îÇ   ‚îî‚îÄ‚îÄ README.md                          # Retraining guide
‚îÇ
‚îú‚îÄ‚îÄ src/                                    # TypeScript source code
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                           # Main package exports
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/                              # Core fraud detection logic
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fraud-guard.ts                 # Main FraudGuard class
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ interfaces/                        # TypeScript interfaces & types
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fraud-guard.interface.ts       # IFraudGuard interface
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts                       # All type definitions
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ model/                             # Model management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.ts                     # Model lifecycle management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ inference.ts                   # TensorFlow.js inference engine
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature-extractor.ts           # Feature engineering & extraction
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metadata.ts                    # Model metadata loader
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/                            # Configuration management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loader.ts                      # Load YAML config
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ defaults.ts                    # Default configuration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validator.ts                   # Validate configuration
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ storage/                           # Database management (Phase 2)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.ts                     # SQLite management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.ts                      # Database schema
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations.ts                  # Schema migrations
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/                             # Utility functions
‚îÇ       ‚îú‚îÄ‚îÄ logger.ts                      # Logging utility
‚îÇ       ‚îú‚îÄ‚îÄ errors.ts                      # Custom error classes
‚îÇ       ‚îú‚îÄ‚îÄ paths.ts                       # Path resolution (project-scoped)
‚îÇ       ‚îú‚îÄ‚îÄ validation.ts                  # Input validation
‚îÇ       ‚îú‚îÄ‚îÄ time-features.ts               # Extract hour, day, month from timestamp
‚îÇ       ‚îî‚îÄ‚îÄ category-mapper.ts             # Category mapping helpers
‚îÇ
‚îú‚îÄ‚îÄ dist/                                   # Compiled JavaScript (generated by build)
‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ index.d.ts
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ interfaces/
‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ
‚îú‚îÄ‚îÄ examples/                               # Usage examples
‚îÇ   ‚îú‚îÄ‚îÄ basic-usage.js                     # Simple prediction example
‚îÇ   ‚îú‚îÄ‚îÄ with-feedback.js                   # Feedback workflow example
‚îÇ   ‚îú‚îÄ‚îÄ category-mapping.js                # Category mapping examples
‚îÇ   ‚îî‚îÄ‚îÄ express-integration.js             # Express.js middleware example
‚îÇ
‚îú‚îÄ‚îÄ tests/                                  # Test files
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model.test.ts                  # Model tests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature-extractor.test.ts      # Feature extraction tests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ time-features.test.ts          # Time feature tests
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ category-mapper.test.ts        # Category mapping tests
‚îÇ   ‚îî‚îÄ‚îÄ integration/
‚îÇ       ‚îî‚îÄ‚îÄ fraud-guard.test.ts            # Full integration tests
‚îÇ
‚îú‚îÄ‚îÄ docs/                                   # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ API.md                             # Complete API reference
‚îÇ   ‚îú‚îÄ‚îÄ CATEGORY_MAPPING.md                # Category mapping guide
‚îÇ   ‚îú‚îÄ‚îÄ RETRAINING.md                      # How to retrain the model
‚îÇ   ‚îú‚îÄ‚îÄ CONFIGURATION.md                   # Configuration guide
‚îÇ   ‚îî‚îÄ‚îÄ TROUBLESHOOTING.md                 # Common issues & solutions
‚îÇ
‚îú‚îÄ‚îÄ .github/                                # GitHub configuration
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îú‚îÄ‚îÄ test.yml                       # Run tests on PR
‚îÇ       ‚îî‚îÄ‚îÄ publish.yml                    # Publish to npm
‚îÇ
‚îú‚îÄ‚îÄ package.json                            # npm package configuration
‚îú‚îÄ‚îÄ package-lock.json                       # Dependency lock file
‚îú‚îÄ‚îÄ tsconfig.json                           # TypeScript configuration
‚îú‚îÄ‚îÄ jest.config.js                          # Jest test configuration
‚îú‚îÄ‚îÄ .eslintrc.js                            # ESLint configuration
‚îú‚îÄ‚îÄ .prettierrc                             # Prettier configuration
‚îú‚îÄ‚îÄ .gitignore                              # Git ignore rules
‚îú‚îÄ‚îÄ .npmignore                              # npm ignore rules
‚îú‚îÄ‚îÄ README.md                               # Main documentation
‚îú‚îÄ‚îÄ LICENSE                                 # MIT License
‚îî‚îÄ‚îÄ CHANGELOG.md                            # Version history


---

~/.fraud-guard/
‚îÇ
‚îú‚îÄ‚îÄ baseline/                               # Shared baseline model (copied from package)
‚îÇ   ‚îú‚îÄ‚îÄ model.json                          # TensorFlow.js model
‚îÇ   ‚îú‚îÄ‚îÄ group1-shard1of1.bin                # Model weights
‚îÇ   ‚îú‚îÄ‚îÄ fraud_detection_model.h5            # Keras model
‚îÇ   ‚îú‚îÄ‚îÄ scaler_params.json                  # Scaler parameters
‚îÇ   ‚îî‚îÄ‚îÄ model_config.json                   # Model metadata
‚îÇ
‚îî‚îÄ‚îÄ projects/                               # Project-specific storage
    ‚îÇ
    ‚îú‚îÄ‚îÄ my-ecommerce-store/                 # Project 1 (from config: project.name)
    ‚îÇ   ‚îú‚îÄ‚îÄ data/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fraud-data.db               # SQLite database
    ‚îÇ   ‚îÇ       # Tables:
    ‚îÇ   ‚îÇ       # - predictions (includes actual_fraud for feedback)
    ‚îÇ   ‚îÇ       # - model_versions
    ‚îÇ   ‚îÇ       # - metadata
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îî‚îÄ‚îÄ models/                         # Retrained models for this project
    ‚îÇ       ‚îú‚îÄ‚îÄ retrained-v1.0.1/
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ model.json
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ group1-shard1of1.bin
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ metadata.json
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îú‚îÄ‚îÄ retrained-v1.0.2/
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ model.json
    ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ group1-shard1of1.bin
    ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ metadata.json
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ‚îÄ current -> retrained-v1.0.2  # Symlink to active model
    ‚îÇ
    ‚îú‚îÄ‚îÄ staging-checkout/                    # Project 2
    ‚îÇ   ‚îú‚îÄ‚îÄ data/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fraud-data.db
    ‚îÇ   ‚îî‚îÄ‚îÄ models/
    ‚îÇ       ‚îú‚îÄ‚îÄ retrained-v1.0.1/
    ‚îÇ       ‚îî‚îÄ‚îÄ current -> retrained-v1.0.1
    ‚îÇ
    ‚îî‚îÄ‚îÄ production-billing/                  # Project 3
        ‚îú‚îÄ‚îÄ data/
        ‚îÇ   ‚îî‚îÄ‚îÄ fraud-data.db
        ‚îî‚îÄ‚îÄ models/
            ‚îî‚îÄ‚îÄ (uses baseline - no retraining yet)


---


-- predictions table (stores all predictions and feedback)
CREATE TABLE predictions (
  -- Identification
  id TEXT PRIMARY KEY,                      -- check_abc123xyz456
  transaction_id TEXT,                      -- User's transaction ID (optional)
  
  -- Timestamp
  created_at DATETIME NOT NULL,             -- When prediction was made
  
  -- Input features (stored for retraining)
  amount REAL NOT NULL,
  hour INTEGER NOT NULL,
  month INTEGER NOT NULL,
  dayofweek INTEGER NOT NULL,
  day INTEGER NOT NULL,
  category TEXT NOT NULL,
  
  -- Prediction results
  score REAL NOT NULL,                      -- 0.65 (fraud probability)
  risk_level TEXT NOT NULL,                 -- 'low', 'medium', 'high'
  action TEXT NOT NULL,                     -- 'accept', 'review', 'reject'
  model_version TEXT NOT NULL,              -- 'v1.0.0', 'v1.0.1', etc.
  
  -- Ground truth from user feedback (NULL until provided)
  actual_fraud INTEGER,                     -- NULL, 0, or 1
  feedback_provided BOOLEAN DEFAULT 0,      -- Has user provided feedback?
  feedback_at DATETIME,                     -- When feedback was provided
  feedback_notes TEXT,                      -- Optional

  üéØ Recommended Implementation for Fraud Guard
Phase 1 (High Priority - Implement First): ‚≠ê‚≠ê‚≠ê

‚úÖ Transaction Frequency per Customer

Count in last: 10 min, 1 hour, 24 hours
Thresholds: 5/10min, 10/1hour, 50/24hours


‚úÖ Transaction Amount Velocity per Customer

Sum in last: 1 hour, 24 hours, 7 days
Check deviation from average


‚úÖ Failed Transaction Velocity

Track failed attempts
Alert on: 3+ failures then success


‚úÖ Geographic Velocity (using IP ‚Üí geolocation)

Detect impossible travel
Track location changes


‚úÖ Device Velocity

Multiple customers on same device
New device for existing customer




Phase 2 (Medium Priority): ‚≠ê‚≠ê

‚úÖ IP Address Velocity

Multiple customers per IP
Proxy/VPN detection


‚úÖ Wallet Draining Patterns

Already partially implemented
